(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{2930:(e,t,r)=>{"use strict";r.d(t,{default:()=>a});var s=r(5155),n=r(2115);class i extends n.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e,retryCount:0}}componentDidCatch(e,t){var r,s;console.error("ErrorBoundary caught an error:",e,t),null==(r=(s=this.props).onError)||r.call(s,e,t)}render(){if(this.state.hasError){if(this.props.fallback)return this.props.fallback;let e=this.state.retryCount>=2;return(0,s.jsx)("div",{className:"min-h-dvh flex items-center justify-center bg-gradient-to-br from-off-white via-off-white/98 to-off-white/95 px-4",children:(0,s.jsxs)("div",{className:"max-w-md w-full text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 mx-auto mb-6 bg-red-100 rounded-full flex items-center justify-center",children:(0,s.jsx)("ion-icon",{name:"warning-outline",style:{color:"#dc2626",fontSize:"2rem"}})}),(0,s.jsx)("h1",{className:"font-urbanist text-xl font-600 text-charcoal mb-3",children:e?"Persistent Error":"Something went wrong"}),(0,s.jsx)("p",{className:"font-urbanist text-sm text-charcoal/70 mb-6 leading-relaxed",children:e?"We're experiencing technical difficulties. Please contact support if this continues.":"We encountered an unexpected error. Please try again."}),!1,(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("button",{onClick:this.handleRetry,disabled:e,className:"w-full font-urbanist text-base font-600 py-3 px-6 rounded-2xl transition-colors duration-300 focus:outline-none focus:ring-2 ".concat(e?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-sage text-white hover:bg-sage/90 focus:ring-sage/30"),children:e?"Unable to Retry":"Try Again"}),(0,s.jsx)("button",{onClick:()=>window.location.href="/",className:"w-full bg-coral text-white font-urbanist text-base font-600 py-3 px-6 rounded-2xl hover:bg-coral/90 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-coral/30",children:"Go to Home"})]})]})})}return this.props.children}constructor(e){super(e),this.handleRetry=()=>{this.setState(e=>({hasError:!1,error:void 0,retryCount:e.retryCount+1}))},this.state={hasError:!1,retryCount:0}}}let a=i},2995:(e,t,r)=>{"use strict";r.d(t,{default:()=>l});var s=r(5155),n=r(2115),i=r(63);let a=(0,r(7909).default)(()=>Promise.all([r.e(43),r.e(96),r.e(805)]).then(r.bind(r,7805)).then(e=>({default:e.default})),{loadableGenerated:{webpack:()=>[7805]},ssr:!1,loading:()=>(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-off-white",children:(0,s.jsx)("div",{className:"w-8 h-8 border-4 border-sage border-t-transparent rounded-full animate-spin"})})}),o=(0,n.createContext)(null);function l(e){let{children:t}=e,[r,l]=(0,n.useState)(!1),[c,d]=(0,n.useState)(""),u=(0,i.usePathname)();return(0,n.useEffect)(()=>{if(c&&c!==u){l(!0);let e=setTimeout(()=>{l(!1)},300);return()=>clearTimeout(e)}d(u)},[u,c]),(0,s.jsxs)(o.Provider,{value:{isLoading:r,setIsLoading:l},children:[r&&(0,s.jsx)(a,{}),t]})}},3673:()=>{},4027:(e,t,r)=>{"use strict";r.d(t,{ToastProvider:()=>a,d:()=>o});var s=r(5155),n=r(2115);let i=(0,n.createContext)(void 0);function a(e){let{children:t}=e,[r,a]=(0,n.useState)([]),o=e=>{a(t=>t.filter(t=>t.id!==e))};return(0,s.jsxs)(i.Provider,{value:{showToast:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3,s=Date.now().toString(),n={id:s,message:e,type:t,duration:r};a(e=>[...e,n]),setTimeout(()=>{o(s)},r)},removeToast:o},children:[t,r.length>0&&(0,s.jsx)("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",children:r.map(e=>(0,s.jsx)("div",{className:"\n                pointer-events-auto max-w-sm w-full backdrop-blur-xl border rounded-xl p-4 shadow-2xl\n                transition-all duration-300 ease-out\n                ".concat((e=>{switch(e){case"success":return"bg-sage/95 border-sage/30 text-white";case"error":return"bg-red-500/95 border-red-400/30 text-white";case"warning":return"bg-amber-500/95 border-amber-400/30 text-white";default:return"bg-charcoal/95 border-charcoal/30 text-white"}})(e.type),"\n              "),children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("ion-icon",{name:(e=>{switch(e){case"success":return"checkmark-circle";case"error":return"close-circle";case"warning":return"warning";default:return"information-circle"}})(e.type),style:{fontSize:"24px"}})}),(0,s.jsx)("div",{className:"flex-1 min-w-0",children:(0,s.jsx)("p",{className:"font-urbanist text-sm font-600 leading-tight",children:e.message})}),(0,s.jsx)("button",{onClick:()=>o(e.id),className:"flex-shrink-0 ml-2 opacity-70 hover:opacity-100 transition-opacity duration-200",children:(0,s.jsx)("ion-icon",{name:"close",style:{fontSize:"20px"}})})]})},e.id))})]})}function o(){let e=(0,n.useContext)(i);if(void 0===e)throw Error("useToast must be used within a ToastProvider");return e}},6030:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,1402,23)),Promise.resolve().then(r.t.bind(r,133,23)),Promise.resolve().then(r.bind(r,2930)),Promise.resolve().then(r.bind(r,6839)),Promise.resolve().then(r.bind(r,2995)),Promise.resolve().then(r.bind(r,9176)),Promise.resolve().then(r.bind(r,8515)),Promise.resolve().then(r.bind(r,4027)),Promise.resolve().then(r.t.bind(r,3673,23))},6839:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});var s=r(2115);let n=function(){return(0,s.useEffect)(()=>{r.e(96).then(r.bind(r,3412)).then(e=>{let t=e=>{};e.onCLS(t),e.onFID(t),e.onFCP(t),e.onLCP(t),e.onTTFB(t)}).catch(e=>{})},[]),null}},8515:(e,t,r)=>{"use strict";r.d(t,{OnboardingProvider:()=>u,z:()=>m});var s=r(5155),n=r(2115),i=r(9176),a=r(4027);let o=(0,n.createContext)(void 0),l=["interests","subcategories","deal-breakers","complete"],c=[{id:"food",name:"Food & Dining",description:"Restaurants, cafes, and culinary experiences",icon:"restaurant"},{id:"entertainment",name:"Entertainment",description:"Movies, shows, and nightlife",icon:"musical-notes"},{id:"shopping",name:"Shopping",description:"Retail stores and markets",icon:"bag"},{id:"health",name:"Health & Wellness",description:"Gyms, spas, and medical services",icon:"fitness"},{id:"services",name:"Services",description:"Professional and personal services",icon:"construct"},{id:"automotive",name:"Automotive",description:"Car services and repairs",icon:"car"},{id:"home",name:"Home & Garden",description:"Home improvement and gardening",icon:"home"},{id:"beauty",name:"Beauty & Personal Care",description:"Salons and personal care services",icon:"cut"}],d=[{id:"restaurants",name:"Restaurants",description:"Fine dining and casual restaurants"},{id:"cafes",name:"Cafes & Coffee Shops",description:"Coffee shops and casual cafes"},{id:"fast-food",name:"Fast Food",description:"Quick service restaurants"},{id:"bakeries",name:"Bakeries",description:"Bakeries and pastry shops"},{id:"movies",name:"Movie Theaters",description:"Cinemas and movie theaters"},{id:"bars",name:"Bars & Pubs",description:"Drinking establishments"},{id:"clubs",name:"Nightclubs",description:"Dance clubs and nightlife"},{id:"concerts",name:"Live Music",description:"Concert venues and live music"},{id:"clothing",name:"Clothing Stores",description:"Fashion and apparel stores"},{id:"electronics",name:"Electronics",description:"Electronic goods and gadgets"},{id:"grocery",name:"Grocery Stores",description:"Supermarkets and grocery stores"},{id:"specialty",name:"Specialty Shops",description:"Unique and specialty retail"},{id:"gyms",name:"Gyms & Fitness",description:"Fitness centers and gyms"},{id:"spas",name:"Spas & Wellness",description:"Spas and wellness centers"},{id:"medical",name:"Medical Services",description:"Healthcare and medical services"},{id:"dental",name:"Dental Care",description:"Dental offices and services"}];function u(e){let{children:t}=e,{user:r,updateUser:u}=(0,i.A)(),{showToast:m}=(0,a.d)(),[h,f]=(0,n.useState)([]),[p,g]=(0,n.useState)([]),[b,v]=(0,n.useState)([]),[x,y]=(0,n.useState)([]),[w,S]=(0,n.useState)([]),[C,k]=(0,n.useState)(!1),[P,j]=(0,n.useState)(null),E=(null==r?void 0:r.onboardingStep)||"interests",N=(0,n.useCallback)(async()=>{try{k(!0),j(null),await new Promise(e=>setTimeout(e,300)),f(c)}catch(e){console.error("Error loading interests:",e),j("Failed to load interests")}finally{k(!1)}},[]),T=(0,n.useCallback)(async e=>{try{k(!0),j(null),await new Promise(e=>setTimeout(e,300));let t=d;e&&e.length>0&&(t=d),g(t)}catch(e){console.error("Error loading sub-interests:",e),j("Failed to load sub-interests")}finally{k(!1)}},[]),F=(0,n.useCallback)(e=>{switch(e){case"interests":return"Great! ".concat(b.length," interests selected. Let's explore sub-categories!");case"subcategories":return"Perfect! ".concat(x.length," sub-interests added. Now let's set your dealbreakers.");case"deal-breakers":return"Excellent! ".concat(w.length," dealbreakers set. Almost done!");default:return"Step completed successfully!"}},[b.length,x.length,w.length]),O=(0,n.useCallback)(async()=>{if(r)try{k(!0),j(null);let e={onboardingStep:(e=>{let t=l.indexOf(e);return -1===t||t===l.length-1?"complete":l[t+1]})(E)};"interests"===E?e.interests=b:"subcategories"===E?e.subInterests=x:"deal-breakers"===E&&(e.dealbreakers=w),await u(e);let t=F(E);m(t,"success",3e3)}catch(e){console.error("Error proceeding to next step:",e),j("Failed to save progress")}finally{k(!1)}},[r,E,b,x,w,u,m,F]),I=(0,n.useCallback)(async()=>{if(r)try{k(!0),j(null),await u({onboardingComplete:!0,onboardingStep:"complete",interests:b,subInterests:x,dealbreakers:w}),m("\uD83C\uDF89 Welcome to KLIO! Your profile is now complete.","success",4e3)}catch(e){console.error("Error completing onboarding:",e),j("Failed to complete onboarding")}finally{k(!1)}},[r,b,x,w,u,m]);return(0,s.jsx)(o.Provider,{value:{interests:h,subInterests:p,selectedInterests:b,selectedSubInterests:x,selectedDealbreakers:w,isLoading:C,error:P,currentStep:E,loadInterests:N,loadSubInterests:T,setSelectedInterests:v,setSelectedSubInterests:y,setSelectedDealbreakers:S,nextStep:O,completeOnboarding:I,resetOnboarding:()=>{v([]),y([]),S([]),j(null)}},children:t})}function m(){let e=(0,n.useContext)(o);if(void 0===e)throw Error("useOnboarding must be used within an OnboardingProvider");return e}},9176:(e,t,r)=>{"use strict";r.d(t,{A:()=>l,AuthProvider:()=>o});var s=r(5155),n=r(2115),i=r(63);let a=(0,n.createContext)(void 0);function o(e){let{children:t}=e,[r,o]=(0,n.useState)(null),[l,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)(null),m=(0,i.useRouter)(),h=e=>({id:"dummy-user-id",email:e,onboardingStep:"interests",onboardingComplete:!1,interests:[],subInterests:[],subcategories:[],dealbreakers:[],createdAt:new Date().toISOString()});(0,n.useEffect)(()=>{c(!0),setTimeout(()=>{let e=localStorage.getItem("dummyUser");e&&o(JSON.parse(e)),c(!1)},100)},[]);let f=async(e,t)=>{if(c(!0),u(null),!(null==e?void 0:e.trim())||!(null==t?void 0:t.trim()))return u("Email and password are required"),c(!1),!1;await new Promise(e=>setTimeout(e,500));let r=h(e.trim().toLowerCase());return o(r),localStorage.setItem("dummyUser",JSON.stringify(r)),r.onboardingComplete?m.push("/home"):m.push("/".concat(r.onboardingStep)),c(!1),!0},p=async(e,t)=>{if(c(!0),u(null),!(null==e?void 0:e.trim())||!(null==t?void 0:t.trim()))return u("Email and password are required"),c(!1),!1;await new Promise(e=>setTimeout(e,500));let r=h(e.trim().toLowerCase());return o(r),localStorage.setItem("dummyUser",JSON.stringify(r)),m.push("/interests"),c(!1),!0},g=async()=>{c(!0),o(null),u(null),localStorage.removeItem("dummyUser"),m.push("/onboarding"),c(!1)},b=async e=>{if(!r)return;c(!0),u(null);let t={...r,...e};o(t),localStorage.setItem("dummyUser",JSON.stringify(t)),c(!1)};return(0,s.jsx)(a.Provider,{value:{user:r,login:f,register:p,logout:g,updateUser:b,isLoading:l,error:d},children:t})}function l(){let e=(0,n.useContext)(a);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},e=>{e.O(0,[96,978,441,358],()=>e(e.s=6030)),_N_E=e.O()}]);